<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns:emit="clr-namespace:System.Reflection.Emit;assembly=netstandard"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
  xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
  xmlns:vm="clr-namespace:SociallyAnxiousHub.ViewModels"
  x:Class="SociallyAnxiousHub.MainPage"
  Title="Dashboard"
  BackgroundColor="#F5F5F5">

    <ContentPage.BindingContext>
        <vm:MainViewModel />
    </ContentPage.BindingContext>

    <ScrollView Padding="16">
        <VerticalStackLayout Spacing="16">

                <!-- HEADER -->
                <Grid BackgroundColor="{StaticResource AccentColor}" HeightRequest="60">
                <Label Text="🔍 K-Pop Dashboard"
                       FontSize="20"
                       FontAttributes="Bold"
                       TextColor="White"
                       VerticalOptions="Center"
                       HorizontalOptions="Center" />
                </Grid>

                <!-- QUOTE CARD -->
                <Frame Style="{StaticResource CardFrame}">
                    <VerticalStackLayout>
                    <Label 
                        Text="💬 Quote of the Moment"
                        FontAttributes="Bold"
                        FontSize="16"
                        TextColor="{StaticResource AccentColor}" />        
                    <emit:Label 
                        Text="{Binding QuoteText}"
                        FontSize="14"
                        TextColor="#333"/>
                    </VerticalStackLayout>
                </Frame>

                <!-- STATS CARD -->
                <Frame Style="{StaticResource CardFrame}">
                    <VerticalStackLayout Spacing="12">
                    <Label Text="📊 Latest Stats"
                            FontAttributes="Bold"
                            FontSize="16"
                            TextColor="{StaticResource AccentColor}" />
                    <Label Text="{Binding StatsText}"
                             FontSize="14"
                             TextColor="#333"/> 
                    <ProgressBar 
                        Progress="{Binding Progress}" 
                        HeightRequest="8"
                        BackgroundColor="#EEE"
                        ProgressColor="{StaticResource AccentColor}" />
                    </VerticalStackLayout>
                </Frame>

                <!-- ACTIONS -->
            <HorizontalStackLayout Spacing="12" HorizontalOptions="Center">
                <Button Text="Fetch Stats"
                            Command="{Binding FetchCommand}"
                            BackgroundColor="{StaticResource AccentColor}"
                            TextColor="White"
                            CornerRadius="8"
                            Padding="12,8"
                              Command="{Binding FetchCommand}"
                              IsEnabled="{Binding IsBusy, Converter={StaticResource InverseBool}}" />
                <ActivityIndicator IsRunning="{Binding IsBusy}" />
                <Button Text="Cancel"
                            Command="{Binding CancelCommand}"
                            BackgroundColor="#E53935"
                            TextColor="White"
                            CornerRadius="8"
                            Padding="12,8"/>
            </HorizontalStackLayout>
        </VerticalStackLayout>
        </ScrollView>
</ContentPage>